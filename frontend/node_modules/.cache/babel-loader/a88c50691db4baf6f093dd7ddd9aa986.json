{"remainingRequest":"/home/ludov/Desktop/duckydoc/frontend/node_modules/babel-loader/lib/index.js!/home/ludov/Desktop/duckydoc/frontend/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/ludov/Desktop/duckydoc/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ludov/Desktop/duckydoc/frontend/src/views/Documents.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/ludov/Desktop/duckydoc/frontend/src/views/Documents.vue","mtime":1616778603593},{"path":"/home/ludov/Desktop/duckydoc/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ludov/Desktop/duckydoc/frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/ludov/Desktop/duckydoc/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ludov/Desktop/duckydoc/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZGF0ZS50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLm1hdGNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLnVybC5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiRG9jdW1lbnRzIiwKICBjb21wb25lbnRzOiB7fSwKICBtZXRob2RzOiB7CiAgICBjaGVja19jb29raWVfdmFsdWU6IGZ1bmN0aW9uIGNoZWNrX2Nvb2tpZV92YWx1ZShuYW1lKSB7CiAgICAgIHZhciBtYXRjaCA9IGRvY3VtZW50LmNvb2tpZS5tYXRjaChuZXcgUmVnRXhwKCIoXnwgKSIgKyBuYW1lICsgIj0oW147XSspIikpOwoKICAgICAgaWYgKG1hdGNoKSB7CiAgICAgICAgcmV0dXJuIG1hdGNoWzJdOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiAtMTsKICAgICAgfQogICAgfSwKICAgIGNvbnZlcnREYXRlOiBmdW5jdGlvbiBjb252ZXJ0RGF0ZShkYXRlU3RyaW5nKSB7CiAgICAgIGRhdGVTdHJpbmcgPSBkYXRlU3RyaW5nLnRvU3RyaW5nKCk7CiAgICAgIHJldHVybiBkYXRlU3RyaW5nLnJlcGxhY2UoLyhcZHs0fSkoXGRcZCkoXGRcZCkvZywgIiQyLyQzLyQxIik7CiAgICB9LAogICAgZG93bmxvYWRJdDogZnVuY3Rpb24gZG93bmxvYWRJdChpZCwgbmFtZWZpbGUsIGNvc3QpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciBpZFVzZXIgPSB0aGlzLmNoZWNrX2Nvb2tpZV92YWx1ZSgiaWQiKTsKICAgICAgdmFyIGlkR29vZ2xlID0gdGhpcy5jaGVja19jb29raWVfdmFsdWUoIlRva2VuIik7CiAgICAgIHRoaXMuZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTsKICAgICAgYXhpb3MuZ2V0KCJodHRwOi8vbG9jYWxob3N0OjgwODUvYXBpL3V0ZW50aS8iICsgaWRHb29nbGUpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuY3JlZGl0cyA+IGNvc3QpIHsKICAgICAgICAgIF90aGlzLmZvcm1EYXRhLmFwcGVuZCgiY3JlZGl0cyIsIHJlc3BvbnNlLmRhdGEuY3JlZGl0cyAtIGNvc3QpOwoKICAgICAgICAgIGF4aW9zLmdldCgiaHR0cDovL2xvY2FsaG9zdDo4MDg1L2FwaS9kb2N1bWVudHMvIiArIGlkLCB7CiAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogImJsb2IiCiAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICB2YXIgdXJsID0gd2luZG93LlVSTC5jcmVhdGVPYmplY3RVUkwobmV3IEJsb2IoW3Jlc3BvbnNlLmRhdGFdKSk7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTsKICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UuaGVhZGVyc1siY29udGVudC10eXBlIl0pOwogICAgICAgICAgICB2YXIgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImEiKTsKICAgICAgICAgICAgbGluay5ocmVmID0gdXJsOwogICAgICAgICAgICBsaW5rLnNldEF0dHJpYnV0ZSgiZG93bmxvYWQiLCBuYW1lZmlsZSk7CiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobGluayk7CiAgICAgICAgICAgIGxpbmsuY2xpY2soKTsKICAgICAgICAgICAgYXhpb3MucHV0KCJodHRwOi8vbG9jYWxob3N0OjgwODUvYXBpL3V0ZW50aS8iICsgaWRVc2VyICsgIi91cGRhdGVjcmVkaXQiLCBfdGhpcy5mb3JtRGF0YSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZS5kYXRhLmNyZWRpdHMpOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgc2VhcmNoRG9jdW1lbnRzOiBmdW5jdGlvbiBzZWFyY2hEb2N1bWVudHMoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgYXhpb3MuZ2V0KCJodHRwOi8vbG9jYWxob3N0OjgwODUvYXBpL2RvY3VtZW50cy9zZWFyY2gvIiArIHRoaXMuc2VhcmNoVW5pICsgIi8iICsgdGhpcy5zZWFyY2hDb3Vyc2UgKyAiLyIgKyB0aGlzLnNlYXJjaFR5cGUgKyAiLyIgKyB0aGlzLnNlYXJjaFllYXIpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgX3RoaXMyLmRvY3VtZW50cyA9IHJlc3BvbnNlLmRhdGE7CiAgICAgIH0pOwogICAgfQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHNlYXJjaFVuaTogbnVsbCwKICAgICAgc2VhcmNoQ291cnNlOiBudWxsLAogICAgICBzZWFyY2hUeXBlOiBudWxsLAogICAgICBzZWFyY2hZZWFyOiBudWxsLAogICAgICBkb2N1bWVudHM6IFtdCiAgICB9OwogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgIGF4aW9zLmdldCgiaHR0cDovL2xvY2FsaG9zdDo4MDg1L2FwaS9kb2N1bWVudHMvIikudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgX3RoaXMzLmRvY3VtZW50cyA9IHJlc3BvbnNlLmRhdGE7CiAgICB9KTsKICB9Cn07"},{"version":3,"sources":["Documents.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div>\n    <v-row>\n      <v-col cols=\"3\">\n        <v-navigation-drawer\n          permanent\n          class=\"full_heigth\"\n          style=\"height: 100%; width: 100%\"\n          dark\n        >\n          <v-list dense>\n            <v-list-item>\n              <v-list-item-content>\n                <v-list-item-title>University</v-list-item-title>\n                <v-text-field\n                  v-model=\"searchUni\"\n                  placeholder=\"insert some keywords\"\n                  solo\n                  class=\"mt-2\"\n                ></v-text-field>\n              </v-list-item-content>\n            </v-list-item>\n\n            <v-list-item>\n              <v-list-item-content>\n                <v-list-item-title>Course</v-list-item-title>\n                <v-text-field\n                  v-model=\"searchCourse\"\n                  placeholder=\"insert some keywords\"\n                  solo\n                  class=\"mt-2\"\n                ></v-text-field>\n              </v-list-item-content>\n            </v-list-item>\n\n            <v-list-item>\n              <v-list-item-content>\n                <v-list-item-title>Typology</v-list-item-title>\n                <v-text-field\n                  v-model=\"searchType\"\n                  placeholder=\"insert some keywords\"\n                  solo\n                  class=\"mt-2\"\n                ></v-text-field>\n              </v-list-item-content>\n            </v-list-item>\n            <v-list-item>\n              <v-list-item-content>\n                <v-list-item-title>Year</v-list-item-title>\n                <v-text-field\n                  v-model=\"searchYear\"\n                  placeholder=\"insert some keywords\"\n                  solo\n                  class=\"mt-2\"\n                ></v-text-field>\n              </v-list-item-content>\n            </v-list-item>\n            <v-list-item>\n              <v-btn @click=\"searchDocuments()\" class=\"center\">\n                Search your params\n              </v-btn>\n            </v-list-item>\n          </v-list>\n        </v-navigation-drawer>\n      </v-col>\n      <v-col cols=\"9\">\n        <v-card\n          v-for=\"(document, index) in documents\"\n          :key=\"index\"\n          color=\"#f4ecb4\"\n          class=\"mt-2 document\"\n        >\n          <v-card-title class=\"headline\"> {{ document.title }}</v-card-title>\n\n          <v-card-text>{{ document.user.username }}</v-card-text>\n\n          <v-card-actions class=\"card-actions\">\n            <v-btn\n              @click=\"\n                downloadIt(document.id, document.nameFile, document.price)\n              \"\n            >\n              Download\n            </v-btn>\n          </v-card-actions>\n          <v-card-actions class=\"card-actions2\">\n            <v-btn text disabled>\n              {{ convertDate(document.creationData) }}\n            </v-btn>\n          </v-card-actions>\n        </v-card>\n      </v-col>\n    </v-row>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nexport default {\n  name: \"Documents\",\n  components: {},\n  methods: {\n    check_cookie_value(name) {\n      var match = document.cookie.match(\n        new RegExp(\"(^| )\" + name + \"=([^;]+)\")\n      );\n      if (match) {\n        return match[2];\n      } else {\n        return -1;\n      }\n    },\n    convertDate(dateString) {\n      dateString = dateString.toString();\n      return dateString.replace(/(\\d{4})(\\d\\d)(\\d\\d)/g, \"$2/$3/$1\");\n    },\n    downloadIt(id, namefile, cost) {\n      var idUser = this.check_cookie_value(\"id\");\n      var idGoogle = this.check_cookie_value(\"Token\");\n      this.formData = new FormData();\n\n      axios\n        .get(\"http://localhost:8085/api/utenti/\" + idGoogle)\n        .then((response) => {\n          if (response.data.credits > cost) {\n            this.formData.append(\"credits\", response.data.credits - cost);\n            axios\n              .get(\"http://localhost:8085/api/documents/\" + id, {\n                responseType: \"blob\",\n              })\n              .then((response) => {\n                const url = window.URL.createObjectURL(\n                  new Blob([response.data])\n                );\n                console.log(response);\n                console.log(response.headers[\"content-type\"]);\n                const link = document.createElement(\"a\");\n                link.href = url;\n                link.setAttribute(\"download\", namefile);\n                document.body.appendChild(link);\n                link.click();\n                axios\n                  .put(\n                    \"http://localhost:8085/api/utenti/\" +\n                      idUser +\n                      \"/updatecredit\",\n                    this.formData\n                  )\n                  .then((response) => {\n                    console.log(response.data.credits);\n                  });\n              });\n          }\n        });\n    },\n    searchDocuments() {\n      axios\n        .get(\n          \"http://localhost:8085/api/documents/search/\" +\n            this.searchUni +\n            \"/\" +\n            this.searchCourse +\n            \"/\" +\n            this.searchType +\n            \"/\" +\n            this.searchYear\n        )\n        .then((response) => {\n          this.documents = response.data;\n        });\n    },\n  },\n  data() {\n    return {\n      searchUni: null,\n      searchCourse: null,\n      searchType: null,\n      searchYear: null,\n      documents: [],\n    };\n  },\n  mounted() {\n    axios.get(\"http://localhost:8085/api/documents/\").then((response) => {\n      this.documents = response.data;\n    });\n  },\n};\n</script>\n<style scoped>\n.document {\n  height: 30vh;\n  width: 70vw;\n  margin-left: auto;\n  margin-right: auto;\n}\n.card-actions2 {\n  position: absolute;\n  bottom: 0;\n}\n.card-actions {\n  position: absolute;\n  bottom: 0;\n  right: 0;\n}\n.center {\n  margin-left: auto;\n  margin-right: auto;\n}\n</style>\n"],"sourceRoot":"src/views"}]}