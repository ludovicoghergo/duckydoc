{"remainingRequest":"/home/ludov/Desktop/duckydoc/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ludov/Desktop/duckydoc/frontend/src/views/Documents.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/ludov/Desktop/duckydoc/frontend/src/views/Documents.vue","mtime":1618333787497},{"path":"/home/ludov/Desktop/duckydoc/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ludov/Desktop/duckydoc/frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/ludov/Desktop/duckydoc/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ludov/Desktop/duckydoc/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiRG9jdW1lbnRzIiwKICBjb21wb25lbnRzOiB7fSwKICB3YXRjaDogewogICAgc2VhcmNoVW5pOiBmdW5jdGlvbiAodmFsKSB7CiAgICAgIGlmICh2YWwgPT0gIiIpIHRoaXMuc2VhcmNoVW5pID0gbnVsbDsKICAgICAgYXhpb3MKICAgICAgICAuZ2V0KAogICAgICAgICAgImh0dHA6Ly9sb2NhbGhvc3Q6ODA4NS9hcGkvZG9jdW1lbnRzL3NlYXJjaC8iICsKICAgICAgICAgICAgdGhpcy5zZWFyY2hVbmkgKwogICAgICAgICAgICAiLyIgKwogICAgICAgICAgICB0aGlzLnNlYXJjaENvdXJzZSArCiAgICAgICAgICAgICIvIiArCiAgICAgICAgICAgIHRoaXMuc2VhcmNoVHlwZSArCiAgICAgICAgICAgICIvIiArCiAgICAgICAgICAgIHRoaXMuc2VhcmNoWWVhcgogICAgICAgICkKICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAgIHRoaXMuZG9jdW1lbnRzID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICB9KTsKICAgIH0sCiAgICBzZWFyY2hDb3Vyc2U6IGZ1bmN0aW9uICh2YWwpIHsKICAgICAgaWYgKHZhbCA9PSAiIikgdGhpcy5zZWFyY2hDb3Vyc2UgPSBudWxsOwogICAgICBheGlvcwogICAgICAgIC5nZXQoCiAgICAgICAgICAiaHR0cDovL2xvY2FsaG9zdDo4MDg1L2FwaS9kb2N1bWVudHMvc2VhcmNoLyIgKwogICAgICAgICAgICB0aGlzLnNlYXJjaFVuaSArCiAgICAgICAgICAgICIvIiArCiAgICAgICAgICAgIHRoaXMuc2VhcmNoQ291cnNlICsKICAgICAgICAgICAgIi8iICsKICAgICAgICAgICAgdGhpcy5zZWFyY2hUeXBlICsKICAgICAgICAgICAgIi8iICsKICAgICAgICAgICAgdGhpcy5zZWFyY2hZZWFyCiAgICAgICAgKQogICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgICAgdGhpcy5kb2N1bWVudHMgPSByZXNwb25zZS5kYXRhOwogICAgICAgIH0pOwogICAgfSwKICAgIHNlYXJjaFR5cGU6IGZ1bmN0aW9uICh2YWwpIHsKICAgICAgaWYgKHZhbCA9PSAiIikgdGhpcy5zZWFyY2hUeXBlID0gbnVsbDsKICAgICAgYXhpb3MKICAgICAgICAuZ2V0KAogICAgICAgICAgImh0dHA6Ly9sb2NhbGhvc3Q6ODA4NS9hcGkvZG9jdW1lbnRzL3NlYXJjaC8iICsKICAgICAgICAgICAgdGhpcy5zZWFyY2hVbmkgKwogICAgICAgICAgICAiLyIgKwogICAgICAgICAgICB0aGlzLnNlYXJjaENvdXJzZSArCiAgICAgICAgICAgICIvIiArCiAgICAgICAgICAgIHRoaXMuc2VhcmNoVHlwZSArCiAgICAgICAgICAgICIvIiArCiAgICAgICAgICAgIHRoaXMuc2VhcmNoWWVhcgogICAgICAgICkKICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAgIHRoaXMuZG9jdW1lbnRzID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICB9KTsKICAgIH0sCiAgICBzZWFyY2hZZWFyOiBmdW5jdGlvbiAodmFsKSB7CiAgICAgIGlmICh2YWwgPT0gIiIpIHRoaXMuc2VhcmNoWWVhciA9IG51bGw7CiAgICAgIGF4aW9zCiAgICAgICAgLmdldCgKICAgICAgICAgICJodHRwOi8vbG9jYWxob3N0OjgwODUvYXBpL2RvY3VtZW50cy9zZWFyY2gvIiArCiAgICAgICAgICAgIHRoaXMuc2VhcmNoVW5pICsKICAgICAgICAgICAgIi8iICsKICAgICAgICAgICAgdGhpcy5zZWFyY2hDb3Vyc2UgKwogICAgICAgICAgICAiLyIgKwogICAgICAgICAgICB0aGlzLnNlYXJjaFR5cGUgKwogICAgICAgICAgICAiLyIgKwogICAgICAgICAgICB0aGlzLnNlYXJjaFllYXIKICAgICAgICApCiAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICB0aGlzLmRvY3VtZW50cyA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgfSk7CiAgICB9LAogIH0sCiAgbWV0aG9kczogewogICAgZ29UbyhhZGRyZXNzKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKGFkZHJlc3MpOwogICAgfSwKICAgIGNoZWNrX2Nvb2tpZV92YWx1ZShuYW1lKSB7CiAgICAgIHZhciBtYXRjaCA9IGRvY3VtZW50LmNvb2tpZS5tYXRjaCgKICAgICAgICBuZXcgUmVnRXhwKCIoXnwgKSIgKyBuYW1lICsgIj0oW147XSspIikKICAgICAgKTsKICAgICAgaWYgKG1hdGNoKSB7CiAgICAgICAgcmV0dXJuIG1hdGNoWzJdOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiAtMTsKICAgICAgfQogICAgfSwKICAgIGNvbnZlcnREYXRlKGRhdGVTdHJpbmcpIHsKICAgICAgZGF0ZVN0cmluZyA9IGRhdGVTdHJpbmcudG9TdHJpbmcoKTsKICAgICAgcmV0dXJuIGRhdGVTdHJpbmcucmVwbGFjZSgvKFxkezR9KShcZFxkKShcZFxkKS9nLCAiJDIvJDMvJDEiKTsKICAgIH0sCiAgICBkb3dubG9hZEl0KGlkLCBuYW1lZmlsZSwgY29zdCkgewogICAgICB2YXIgaWRVc2VyID0gdGhpcy5jaGVja19jb29raWVfdmFsdWUoImlkIik7CiAgICAgIHZhciBpZEdvb2dsZSA9IHRoaXMuY2hlY2tfY29va2llX3ZhbHVlKCJUb2tlbiIpOwogICAgICB0aGlzLmZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7CgogICAgICBheGlvcwogICAgICAgIC5nZXQoImh0dHA6Ly9sb2NhbGhvc3Q6ODA4NS9hcGkvdXRlbnRpLyIgKyBpZEdvb2dsZSkKICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLmNyZWRpdHMgPiBjb3N0KSB7CiAgICAgICAgICAgIHRoaXMuZm9ybURhdGEuYXBwZW5kKCJjcmVkaXRzIiwgcmVzcG9uc2UuZGF0YS5jcmVkaXRzIC0gY29zdCk7CiAgICAgICAgICAgIGF4aW9zCiAgICAgICAgICAgICAgLmdldCgiaHR0cDovL2xvY2FsaG9zdDo4MDg1L2FwaS9kb2N1bWVudHMvZG93bmxvYWQvIiArIGlkLCB7CiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6ICJibG9iIiwKICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgICAgICAgICAgY29uc3QgdXJsID0gd2luZG93LlVSTC5jcmVhdGVPYmplY3RVUkwoCiAgICAgICAgICAgICAgICAgIG5ldyBCbG9iKFtyZXNwb25zZS5kYXRhXSkKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZS5kYXRhKTsKICAgICAgICAgICAgICAgIGNvbnN0IGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJhIik7CiAgICAgICAgICAgICAgICBsaW5rLmhyZWYgPSB1cmw7CiAgICAgICAgICAgICAgICBsaW5rLnNldEF0dHJpYnV0ZSgiZG93bmxvYWQiLCBuYW1lZmlsZSk7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGxpbmspOwogICAgICAgICAgICAgICAgbGluay5jbGljaygpOwogICAgICAgICAgICAgICAgYXhpb3MKICAgICAgICAgICAgICAgICAgLnB1dCgKICAgICAgICAgICAgICAgICAgICAiaHR0cDovL2xvY2FsaG9zdDo4MDg1L2FwaS91dGVudGkvIiArCiAgICAgICAgICAgICAgICAgICAgICBpZFVzZXIgKwogICAgICAgICAgICAgICAgICAgICAgIi91cGRhdGVjcmVkaXQiLAogICAgICAgICAgICAgICAgICAgIHsgY3JlZGl0czogcmVzcG9uc2UuZGF0YS5jcmVkaXRzIC0gY29zdCB9CiAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UuZGF0YS5jcmVkaXRzKTsKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLmRpYWxvZyA9IHRydWU7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICB9LAogICAgc2VhcmNoRG9jdW1lbnRzKCkgewogICAgICBheGlvcwogICAgICAgIC5nZXQoCiAgICAgICAgICAiaHR0cDovL2xvY2FsaG9zdDo4MDg1L2FwaS9kb2N1bWVudHMvc2VhcmNoLyIgKwogICAgICAgICAgICB0aGlzLnNlYXJjaFVuaSArCiAgICAgICAgICAgICIvIiArCiAgICAgICAgICAgIHRoaXMuc2VhcmNoQ291cnNlICsKICAgICAgICAgICAgIi8iICsKICAgICAgICAgICAgdGhpcy5zZWFyY2hUeXBlICsKICAgICAgICAgICAgIi8iICsKICAgICAgICAgICAgdGhpcy5zZWFyY2hZZWFyCiAgICAgICAgKQogICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgICAgdGhpcy5kb2N1bWVudHMgPSByZXNwb25zZS5kYXRhOwogICAgICAgIH0pOwogICAgfSwKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBkaWFsb2c6IGZhbHNlLAogICAgICBzZWFyY2hVbmk6IG51bGwsCiAgICAgIHNlYXJjaENvdXJzZTogbnVsbCwKICAgICAgc2VhcmNoVHlwZTogbnVsbCwKICAgICAgc2VhcmNoWWVhcjogbnVsbCwKICAgICAgZG9jdW1lbnRzOiBbXSwKICAgIH07CiAgfSwKICBtb3VudGVkKCkgewogICAgYXhpb3MuZ2V0KCJodHRwOi8vbG9jYWxob3N0OjgwODUvYXBpL2RvY3VtZW50cy8iKS50aGVuKChyZXNwb25zZSkgPT4gewogICAgICB0aGlzLmRvY3VtZW50cyA9IHJlc3BvbnNlLmRhdGE7CiAgICB9KTsKICB9LAp9Owo="},{"version":3,"sources":["Documents.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Documents.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div>\n    <v-dialog v-model=\"dialog\" max-width=\"290\">\n      <v-card class=\"text-center\">\n        <v-card-title class=\"headline\"> Oh no! </v-card-title>\n\n        <v-card-text>\n          It looks like you spent all your coins. Please answer some question or\n          upload some document before continue downloading.\n        </v-card-text>\n\n        <v-card-actions>\n          <v-spacer></v-spacer>\n\n          <v-btn color=\"green darken-1\" text @click=\"dialog = false\">\n            Ok\n          </v-btn>\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n\n    <v-row>\n      <v-col cols=\"3\">\n        <v-navigation-drawer\n          permanent\n          class=\"full_heigth\"\n          style=\"height: 100%; width: 100%\"\n          dark\n        >\n          <v-list dense>\n            <v-list-item>\n              <v-list-item-content>\n                <v-list-item-title>University</v-list-item-title>\n                <v-text-field\n                  v-model=\"searchUni\"\n                  placeholder=\"insert some keywords\"\n                  solo\n                  class=\"mt-2\"\n                ></v-text-field>\n              </v-list-item-content>\n            </v-list-item>\n\n            <v-list-item>\n              <v-list-item-content>\n                <v-list-item-title>Course</v-list-item-title>\n                <v-text-field\n                  v-model=\"searchCourse\"\n                  placeholder=\"insert some keywords\"\n                  solo\n                  class=\"mt-2\"\n                ></v-text-field>\n              </v-list-item-content>\n            </v-list-item>\n\n            <v-list-item>\n              <v-list-item-content>\n                <v-list-item-title>Typology</v-list-item-title>\n                <v-text-field\n                  v-model=\"searchType\"\n                  placeholder=\"insert some keywords\"\n                  solo\n                  class=\"mt-2\"\n                ></v-text-field>\n              </v-list-item-content>\n            </v-list-item>\n            <v-list-item>\n              <v-list-item-content>\n                <v-list-item-title>Year</v-list-item-title>\n                <v-text-field\n                  v-model=\"searchYear\"\n                  placeholder=\"insert some keywords\"\n                  solo\n                  class=\"mt-2\"\n                ></v-text-field>\n              </v-list-item-content>\n            </v-list-item>\n          </v-list>\n        </v-navigation-drawer>\n      </v-col>\n      <v-col cols=\"9\">\n        <v-card\n          v-for=\"(document, index) in documents\"\n          :key=\"index\"\n          color=\"#1548e094\"\n          dark\n          class=\"mt-2 document\"\n          @mousedown=\"goTo('/view_Document/' + document.id)\"\n        >\n          <v-card-title class=\"headline\"> {{ document.title }}</v-card-title>\n\n          <v-card-text>{{ document.user.username }}</v-card-text>\n\n          <v-card-actions class=\"card-actions\">\n            <v-btn\n              @click=\"\n                downloadIt(document.id, document.nameFile, document.price)\n              \"\n            >\n              {{ document.price }} $\n            </v-btn>\n          </v-card-actions>\n          <v-card-actions class=\"card-actions2\">\n            <v-btn text disabled>\n              {{ convertDate(document.creationData) }}\n            </v-btn>\n          </v-card-actions>\n        </v-card>\n      </v-col>\n    </v-row>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nexport default {\n  name: \"Documents\",\n  components: {},\n  watch: {\n    searchUni: function (val) {\n      if (val == \"\") this.searchUni = null;\n      axios\n        .get(\n          \"http://localhost:8085/api/documents/search/\" +\n            this.searchUni +\n            \"/\" +\n            this.searchCourse +\n            \"/\" +\n            this.searchType +\n            \"/\" +\n            this.searchYear\n        )\n        .then((response) => {\n          this.documents = response.data;\n        });\n    },\n    searchCourse: function (val) {\n      if (val == \"\") this.searchCourse = null;\n      axios\n        .get(\n          \"http://localhost:8085/api/documents/search/\" +\n            this.searchUni +\n            \"/\" +\n            this.searchCourse +\n            \"/\" +\n            this.searchType +\n            \"/\" +\n            this.searchYear\n        )\n        .then((response) => {\n          this.documents = response.data;\n        });\n    },\n    searchType: function (val) {\n      if (val == \"\") this.searchType = null;\n      axios\n        .get(\n          \"http://localhost:8085/api/documents/search/\" +\n            this.searchUni +\n            \"/\" +\n            this.searchCourse +\n            \"/\" +\n            this.searchType +\n            \"/\" +\n            this.searchYear\n        )\n        .then((response) => {\n          this.documents = response.data;\n        });\n    },\n    searchYear: function (val) {\n      if (val == \"\") this.searchYear = null;\n      axios\n        .get(\n          \"http://localhost:8085/api/documents/search/\" +\n            this.searchUni +\n            \"/\" +\n            this.searchCourse +\n            \"/\" +\n            this.searchType +\n            \"/\" +\n            this.searchYear\n        )\n        .then((response) => {\n          this.documents = response.data;\n        });\n    },\n  },\n  methods: {\n    goTo(address) {\n      this.$router.push(address);\n    },\n    check_cookie_value(name) {\n      var match = document.cookie.match(\n        new RegExp(\"(^| )\" + name + \"=([^;]+)\")\n      );\n      if (match) {\n        return match[2];\n      } else {\n        return -1;\n      }\n    },\n    convertDate(dateString) {\n      dateString = dateString.toString();\n      return dateString.replace(/(\\d{4})(\\d\\d)(\\d\\d)/g, \"$2/$3/$1\");\n    },\n    downloadIt(id, namefile, cost) {\n      var idUser = this.check_cookie_value(\"id\");\n      var idGoogle = this.check_cookie_value(\"Token\");\n      this.formData = new FormData();\n\n      axios\n        .get(\"http://localhost:8085/api/utenti/\" + idGoogle)\n        .then((response) => {\n          if (response.data.credits > cost) {\n            this.formData.append(\"credits\", response.data.credits - cost);\n            axios\n              .get(\"http://localhost:8085/api/documents/download/\" + id, {\n                responseType: \"blob\",\n              })\n              .then((response) => {\n                const url = window.URL.createObjectURL(\n                  new Blob([response.data])\n                );\n                console.log(response.data);\n                const link = document.createElement(\"a\");\n                link.href = url;\n                link.setAttribute(\"download\", namefile);\n                document.body.appendChild(link);\n                link.click();\n                axios\n                  .put(\n                    \"http://localhost:8085/api/utenti/\" +\n                      idUser +\n                      \"/updatecredit\",\n                    { credits: response.data.credits - cost }\n                  )\n                  .then((response) => {\n                    console.log(response.data.credits);\n                  });\n              });\n          } else {\n            this.dialog = true;\n          }\n        });\n    },\n    searchDocuments() {\n      axios\n        .get(\n          \"http://localhost:8085/api/documents/search/\" +\n            this.searchUni +\n            \"/\" +\n            this.searchCourse +\n            \"/\" +\n            this.searchType +\n            \"/\" +\n            this.searchYear\n        )\n        .then((response) => {\n          this.documents = response.data;\n        });\n    },\n  },\n  data() {\n    return {\n      dialog: false,\n      searchUni: null,\n      searchCourse: null,\n      searchType: null,\n      searchYear: null,\n      documents: [],\n    };\n  },\n  mounted() {\n    axios.get(\"http://localhost:8085/api/documents/\").then((response) => {\n      this.documents = response.data;\n    });\n  },\n};\n</script>\n<style scoped>\n.document {\n  height: 30vh;\n  width: 70vw;\n  margin-left: auto;\n  margin-right: auto;\n}\n.card-actions2 {\n  position: absolute;\n  bottom: 0;\n}\n.card-actions {\n  position: absolute;\n  bottom: 0;\n  right: 0;\n}\n.center {\n  margin-left: auto;\n  margin-right: auto;\n}\n</style>\n"]}]}