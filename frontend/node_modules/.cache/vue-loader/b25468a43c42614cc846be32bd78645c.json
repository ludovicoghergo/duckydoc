{"remainingRequest":"/home/ludov/Desktop/duckydoc/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ludov/Desktop/duckydoc/frontend/src/views/Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/ludov/Desktop/duckydoc/frontend/src/views/Login.vue","mtime":1616631508189},{"path":"/home/ludov/Desktop/duckydoc/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ludov/Desktop/duckydoc/frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/ludov/Desktop/duckydoc/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ludov/Desktop/duckydoc/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBHb29nbGVMb2dpbiBmcm9tICJ2dWUtZ29vZ2xlLWxvZ2luIjsKaW1wb3J0IHsgTG9hZGVyUGx1Z2luIH0gZnJvbSAidnVlLWdvb2dsZS1sb2dpbiI7CmltcG9ydCBWdWUgZnJvbSAidnVlIjsKaW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKaW1wb3J0IHsgbWFwQWN0aW9ucyB9IGZyb20gInZ1ZXgiOwpWdWUudXNlKExvYWRlclBsdWdpbiwgewogIGNsaWVudF9pZDoKICAgICI1NjYzODc4Mzg3MTItbWtzdGxicjhxYWE2bWQ3YzlkNWxxNW9lMG45dXEyaHMuYXBwcy5nb29nbGV1c2VyY29udGVudC5jb20iLAp9KTsKVnVlLkdvb2dsZUF1dGgudGhlbigoYXV0aDIpID0+IHsKICBjb25zb2xlLmxvZyhhdXRoMi5pc1NpZ25lZEluLmdldCgpKTsKICBjb25zb2xlLmxvZyhhdXRoMi5jdXJyZW50VXNlci5nZXQoKSk7Cn0pOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkxvZ2luIiwKICBtZXRob2RzOiB7CiAgICAuLi5tYXBBY3Rpb25zKFsidXBkYXRlbG9naW4iXSksCiAgICBvblN1Y2Nlc3MoZ29vZ2xlVXNlcikgewogICAgICB2YXIgZ29vZ2xlbG9naW4gPSBnb29nbGVVc2VyLmdldEJhc2ljUHJvZmlsZSgpOwogICAgICBjb25zb2xlLmxvZygic3VjY2Vzc28iKTsKICAgICAgdGhpcy51cGRhdGVsb2dpbih0cnVlKTsKICAgICAgYXhpb3MKICAgICAgICAuZ2V0KCJodHRwOi8vbG9jYWxob3N0OjgwODUvYXBpL3V0ZW50aS8iICsgZ29vZ2xlbG9naW4uZ2V0SWQoKSkKICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhICE9ICIiKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGF4aW9zCiAgICAgICAgICAgICAgLnBvc3QoImh0dHA6Ly9sb2NhbGhvc3Q6ODA4NS9hcGkvdXRlbnRpL2NyZWF0ZSIsIHsKICAgICAgICAgICAgICAgIGlkR29vZ2xlOiBnb29nbGVsb2dpbi5nZXRJZCgpLnRvU3RyaW5nKCksCiAgICAgICAgICAgICAgICBuYW1lOiBnb29nbGVsb2dpbi5nZXRHaXZlbk5hbWUoKSwKICAgICAgICAgICAgICAgIGVtYWlsOiBnb29nbGVsb2dpbi5nZXRFbWFpbCgpLAogICAgICAgICAgICAgICAgc3VybmFtZTogZ29vZ2xlbG9naW4uZ2V0RmFtaWx5TmFtZSgpLAogICAgICAgICAgICAgICAgaXNNb2Q6IGZhbHNlLAogICAgICAgICAgICAgICAgY3JlZGl0czogMTAwLAogICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7CiAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7CiAgICAgICAgICAgICAgICBpZiAoZXJyb3IucmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IucmVzcG9uc2UuZGF0YSk7CiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yLnJlc3BvbnNlLnN0YXR1cyk7CiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yLnJlc3BvbnNlLmhlYWRlcnMpOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChlcnJvci5yZXF1ZXN0KSB7CiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yLnJlcXVlc3QpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coIkVycm9yIiwgZXJyb3IubWVzc2FnZSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CgogICAgICAgICAgbGV0IGQgPSBuZXcgRGF0ZSgpOwogICAgICAgICAgZC5zZXRUaW1lKGQuZ2V0VGltZSgpICsgMSAqIDI0ICogNjAgKiA2MCAqIDEwMDApOwogICAgICAgICAgbGV0IGV4cGlyZXMgPSAiZXhwaXJlcz0iICsgZC50b1VUQ1N0cmluZygpOwogICAgICAgICAgZG9jdW1lbnQuY29va2llID0KICAgICAgICAgICAgIlRva2VuPSIgKwogICAgICAgICAgICBnb29nbGVsb2dpbi5nZXRJZCgpLnRvU3RyaW5nKCkgKwogICAgICAgICAgICAiOyIgKwogICAgICAgICAgICBleHBpcmVzICsKICAgICAgICAgICAgIjtwYXRoPS8iOwogICAgICAgICAgZG9jdW1lbnQuY29va2llID0KICAgICAgICAgICAgIm5hbWU9IiArIGdvb2dsZWxvZ2luLmdldEdpdmVuTmFtZSgpICsgIjsiICsgZXhwaXJlcyArICI7cGF0aD0vIjsKICAgICAgICAgIGRvY3VtZW50LmNvb2tpZSA9CiAgICAgICAgICAgICJpZD0iICsgcmVzcG9uc2UuZGF0YS5pZCArICI7IiArIGV4cGlyZXMgKyAiO3BhdGg9LyI7CiAgICAgICAgICBjb25zb2xlLmxvZygiY29va2llIHBvb2tpZSIpOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4gewogICAgICAgICAgaWYgKGVycm9yLnJlc3BvbnNlKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yLnJlc3BvbnNlLmRhdGEpOwogICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvci5yZXNwb25zZS5zdGF0dXMpOwogICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvci5yZXNwb25zZS5oZWFkZXJzKTsKICAgICAgICAgIH0gZWxzZSBpZiAoZXJyb3IucmVxdWVzdCkgewogICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvci5yZXF1ZXN0KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCJFcnJvciIsIGVycm9yLm1lc3NhZ2UpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgfSwKICAgIG9uRmFpbHVyZSgpIHsKICAgICAgY29uc29sZS5sb2coImZhaWxlZCIpOwogICAgfSwKICAgIGdvVG8oYWRkcmVzcykgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaChhZGRyZXNzKTsKICAgIH0sCiAgfSwKICBjb21wb25lbnRzOiB7IEdvb2dsZUxvZ2luIH0sCgogIGRhdGE6ICgpID0+ICh7CiAgICBwYXJhbXM6IHsKICAgICAgY2xpZW50X2lkOgogICAgICAgICI1NjYzODc4Mzg3MTItbWtzdGxicjhxYWE2bWQ3YzlkNWxxNW9lMG45dXEyaHMuYXBwcy5nb29nbGV1c2VyY29udGVudC5jb20iLAogICAgfSwKICAgIHJlbmRlclBhcmFtczogewogICAgICB3aWR0aDogMzAwLAogICAgICBoZWlnaHQ6IDUwLAogICAgICBsb25ndGl0bGU6IHRydWUsCiAgICB9LAogIH0pLAp9Owo="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAwBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div>\n    <v-card elevation=\"2\" outlined color=\"#faf6d6\" class=\"mt-2 Question\">\n      <v-card-title class=\"justify-center\">\n        Pagina di Accesso Login\n      </v-card-title>\n      <div class=\"googlebutton\">\n        <GoogleLogin\n          :params=\"params\"\n          :onSuccess=\"onSuccess\"\n          :onFailure=\"onFailure\"\n          :renderParams=\"renderParams\"\n          >Login</GoogleLogin\n        >\n      </div>\n      <v-card-text class=\"text-center\"\n        ><h3>Perchè effettuare il login?</h3>\n        1. Potrai bla bla bla <br />2. è meglio <br />3. fallo e basta\n      </v-card-text>\n    </v-card>\n  </div>\n</template>\n\n<script>\nimport GoogleLogin from \"vue-google-login\";\nimport { LoaderPlugin } from \"vue-google-login\";\nimport Vue from \"vue\";\nimport axios from \"axios\";\nimport { mapActions } from \"vuex\";\nVue.use(LoaderPlugin, {\n  client_id:\n    \"566387838712-mkstlbr8qaa6md7c9d5lq5oe0n9uq2hs.apps.googleusercontent.com\",\n});\nVue.GoogleAuth.then((auth2) => {\n  console.log(auth2.isSignedIn.get());\n  console.log(auth2.currentUser.get());\n});\nexport default {\n  name: \"Login\",\n  methods: {\n    ...mapActions([\"updatelogin\"]),\n    onSuccess(googleUser) {\n      var googlelogin = googleUser.getBasicProfile();\n      console.log(\"successo\");\n      this.updatelogin(true);\n      axios\n        .get(\"http://localhost:8085/api/utenti/\" + googlelogin.getId())\n        .then(function (response) {\n          if (response.data != \"\") {\n            console.log(response);\n          } else {\n            axios\n              .post(\"http://localhost:8085/api/utenti/create\", {\n                idGoogle: googlelogin.getId().toString(),\n                name: googlelogin.getGivenName(),\n                email: googlelogin.getEmail(),\n                surname: googlelogin.getFamilyName(),\n                isMod: false,\n                credits: 100,\n              })\n              .then(function (response) {\n                console.log(response);\n              })\n              .catch((error) => {\n                if (error.response) {\n                  console.log(error.response.data);\n                  console.log(error.response.status);\n                  console.log(error.response.headers);\n                } else if (error.request) {\n                  console.log(error.request);\n                } else {\n                  console.log(\"Error\", error.message);\n                }\n              });\n          }\n\n          let d = new Date();\n          d.setTime(d.getTime() + 1 * 24 * 60 * 60 * 1000);\n          let expires = \"expires=\" + d.toUTCString();\n          document.cookie =\n            \"Token=\" +\n            googlelogin.getId().toString() +\n            \";\" +\n            expires +\n            \";path=/\";\n          document.cookie =\n            \"name=\" + googlelogin.getGivenName() + \";\" + expires + \";path=/\";\n          document.cookie =\n            \"id=\" + response.data.id + \";\" + expires + \";path=/\";\n          console.log(\"cookie pookie\");\n        })\n        .catch((error) => {\n          if (error.response) {\n            console.log(error.response.data);\n            console.log(error.response.status);\n            console.log(error.response.headers);\n          } else if (error.request) {\n            console.log(error.request);\n          } else {\n            console.log(\"Error\", error.message);\n          }\n        });\n    },\n    onFailure() {\n      console.log(\"failed\");\n    },\n    goTo(address) {\n      this.$router.push(address);\n    },\n  },\n  components: { GoogleLogin },\n\n  data: () => ({\n    params: {\n      client_id:\n        \"566387838712-mkstlbr8qaa6md7c9d5lq5oe0n9uq2hs.apps.googleusercontent.com\",\n    },\n    renderParams: {\n      width: 300,\n      height: 50,\n      longtitle: true,\n    },\n  }),\n};\n</script>\n<style scoped>\n.googlebutton {\n  width: 300px;\n  height: 50px;\n  margin-left: auto;\n  margin-right: auto;\n}\n.Question {\n  height: 85vh;\n  width: 70vw;\n  margin-left: auto;\n  margin-right: auto;\n}\n</style>\n"]}]}